{"openapi":"3.0.0","paths":{"/api":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/api/auth/signup":{"post":{"description":"Register a new user account","operationId":"AuthController_signup","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}},"400":{"description":"User update failed: undefined","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateError"}}}},"409":{"description":"User with email undefined already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAlreadyExistsError"}}}}},"summary":"","tags":["Authentication"]}},"/api/auth/login":{"post":{"description":"Authenticate user and return JWT tokens","operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}},"401":{"description":"Invalid email or password","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidCredentialsError"}}}},"403":{"description":"Your account has been deactivated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountDeactivatedError"}}}}},"summary":"","tags":["Authentication"]}},"/api/auth/forgot-password":{"post":{"description":"Request password reset email","operationId":"AuthController_forgotPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgotPasswordDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}}},"summary":"","tags":["Authentication"]}},"/api/auth/reset-password":{"post":{"description":"Reset password using reset token","operationId":"AuthController_resetPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"400":{"description":"Password validation failed: undefined","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordValidationError"}}}},"401":{"description":"Verification token has expired","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenExpiredError"}}}}},"summary":"","tags":["Authentication"]},"get":{"description":"Handle reset password link from email","operationId":"AuthController_handleResetPasswordLink","parameters":[{"name":"token","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordLinkResponseDto"}}}}},"summary":"","tags":["Authentication"]}},"/api/auth/verify-email":{"post":{"description":"Verify email address using verification token","operationId":"AuthController_verifyEmail","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyEmailDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"400":{"description":"Invalid or expired verification token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidTokenError"}}}},"401":{"description":"Verification token has expired","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenExpiredError"}}}}},"summary":"","tags":["Authentication"]}},"/api/auth/resend-verification":{"post":{"description":"Resend verification email","operationId":"AuthController_resendVerificationEmail","parameters":[],"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}}},"summary":"","tags":["Authentication"]}},"/api/auth/refresh-token":{"post":{"description":"Refresh access token using refresh token","operationId":"AuthController_refreshToken","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"400":{"description":"Invalid or expired verification token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidTokenError"}}}},"401":{"description":"Verification token has expired","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenExpiredError"}}}}},"summary":"","tags":["Authentication"]}},"/api/auth/profile":{"get":{"description":"Get authenticated user profile","operationId":"AuthController_getProfile","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"bearer":[]}],"summary":"","tags":["Authentication"]},"put":{"description":"Update authenticated user profile","operationId":"AuthController_updateProfile","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"400":{"description":"User update failed: undefined","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateError"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"bearer":[]}],"summary":"","tags":["Authentication"]}},"/api/auth/change-password":{"post":{"description":"Change user password","operationId":"AuthController_changePassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"400":{"description":"Password validation failed: undefined","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordValidationError"}}}},"401":{"description":"Invalid email or password","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidCredentialsError"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"bearer":[]}],"summary":"","tags":["Authentication"]}},"/api/auth/logout":{"post":{"description":"Logout user and invalidate refresh token","operationId":"AuthController_logout","parameters":[],"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"bearer":[]}],"summary":"","tags":["Authentication"]}},"/api/auth/logout-all":{"post":{"description":"Logout user from all devices","operationId":"AuthController_logoutFromAllDevices","parameters":[],"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"bearer":[]}],"summary":"","tags":["Authentication"]}},"/api/auth/account":{"delete":{"description":"Delete user account (soft delete)","operationId":"AuthController_deleteAccount","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"bearer":[]}],"summary":"","tags":["Authentication"]}},"/api/auth/check-email/{email}":{"get":{"description":"Check if email is available for registration","operationId":"AuthController_checkEmailAvailability","parameters":[{"name":"email","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}}},"summary":"","tags":["Authentication"]}},"/api/auth/validate":{"get":{"description":"Validate JWT token","operationId":"AuthController_validateToken","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}}},"security":[{"bearer":[]}],"summary":"","tags":["Authentication"]}},"/api/users/register":{"post":{"description":"Register a new user","operationId":"UserController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"409":{"description":"User already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAlreadyExistsError"}}}}},"summary":"","tags":["User"]}},"/api/users/login":{"post":{"description":"User login","operationId":"UserController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}},"401":{"description":"Invalid credentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidCredentialsError"}}}},"403":{"description":"User account is not active","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotActiveError"}}}}},"summary":"","tags":["User"]}},"/api/users/profile":{"get":{"description":"Get current user profile","operationId":"UserController_getProfile","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"bearer":[]}],"summary":"","tags":["User"]}},"/api/users":{"get":{"description":"Get all users (admin only)","operationId":"UserController_getAllUsers","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListResponseDto"}}}},"403":{"description":"Insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InsufficientPermissionsError"}}}}},"security":[{"bearer":[]}],"summary":"","tags":["User"]}},"/api/users/{id}":{"get":{"description":"Get user by ID (admin only)","operationId":"UserController_getUserById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"403":{"description":"Insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InsufficientPermissionsError"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"bearer":[]}],"summary":"","tags":["User"]}},"/api/users/{id}/role":{"put":{"description":"Update user role (admin only)","operationId":"UserController_updateUserRole","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"403":{"description":"Insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InsufficientPermissionsError"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"bearer":[]}],"summary":"","tags":["User"]}},"/api/users/{id}/deactivate":{"delete":{"description":"Deactivate user (admin only)","operationId":"UserController_deactivateUser","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponseDto"}}}},"403":{"description":"Insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InsufficientPermissionsError"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"bearer":[]}],"summary":"","tags":["User"]}},"/api/users/deactivate":{"delete":{"description":"Deactivate own account","operationId":"UserController_deactivateOwnAccount","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponseDto"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"bearer":[]}],"summary":"","tags":["User"]}}},"info":{"title":"RoleBased API","description":"Complete authentication and user management API","version":"1.0","contact":{}},"tags":[{"name":"Authentication","description":"Login, registration, token management"},{"name":"Users","description":"User management operations"},{"name":"Profile","description":"User profile operations"}],"servers":[],"components":{"securitySchemes":{"JWT-auth":{"scheme":"bearer","bearerFormat":"JWT","type":"http","name":"JWT","description":"Enter JWT token","in":"header"}},"schemas":{"SignUpDto":{"type":"object","properties":{"email":{"type":"string","description":"User email address","example":"user@example.com","maxLength":100},"password":{"type":"string","description":"User password (must contain uppercase, lowercase, and number)","example":"Password123","minLength":6,"maxLength":100},"name":{"type":"string","description":"User full name","example":"John Doe","minLength":2,"maxLength":50},"phone":{"type":"string","description":"User phone number","example":"+1234567890","maxLength":20},"role":{"type":"string","description":"User role","enum":["user","admin"],"example":"user","default":"user"}},"required":["email","password","name"]},"UserResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"User ID","example":"507f1f77bcf86cd799439011"},"email":{"type":"string","description":"User email address","example":"john.doe@example.com"},"name":{"type":"string","description":"User full name","example":"John Doe"},"role":{"type":"string","description":"User role","enum":["USER","ADMIN"],"example":"USER"},"isActive":{"type":"boolean","description":"Whether the user account is active","example":true},"isVerified":{"type":"boolean","description":"Whether the user email is verified","example":true},"phone":{"type":"string","description":"User phone number","example":"+1234567890"},"avatar":{"type":"string","description":"User avatar URL","example":"https://example.com/avatar.jpg"},"bio":{"type":"string","description":"User biography","example":"Software developer with 5 years of experience"},"createdAt":{"format":"date-time","type":"string","description":"Account creation date","example":"2024-01-15T10:30:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"Last account update date","example":"2024-01-15T10:30:00.000Z"}},"required":["id","email","name","role","isActive","isVerified","createdAt","updatedAt"]},"AuthResponseDto":{"type":"object","properties":{"token":{"type":"string","description":"JWT access token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"refreshToken":{"type":"string","description":"Refresh token","example":"refresh-token-xyz789"},"user":{"description":"User information","allOf":[{"$ref":"#/components/schemas/UserResponseDto"}]}},"required":["token","user"]},"UserUpdateError":{"type":"object","properties":{}},"UserAlreadyExistsError":{"type":"object","properties":{}},"LoginDto":{"type":"object","properties":{"email":{"type":"string","description":"User email address","example":"user@example.com"},"password":{"type":"string","description":"User password","example":"Password123"}},"required":["email","password"]},"InvalidCredentialsError":{"type":"object","properties":{}},"AccountDeactivatedError":{"type":"object","properties":{}},"ForgotPasswordDto":{"type":"object","properties":{"email":{"type":"string","description":"Email address for password reset","example":"user@example.com"}},"required":["email"]},"ResetPasswordDto":{"type":"object","properties":{"token":{"type":"string","description":"Reset token received via email","example":"abc123-def456-ghi789"},"newPassword":{"type":"string","description":"New password (must contain uppercase, lowercase, and number)","example":"NewPassword456","minLength":6,"maxLength":100}},"required":["token","newPassword"]},"PasswordValidationError":{"type":"object","properties":{}},"TokenExpiredError":{"type":"object","properties":{}},"VerifyEmailDto":{"type":"object","properties":{"token":{"type":"string","description":"Verification token received via email","example":"verification-token-abc123"}},"required":["token"]},"InvalidTokenError":{"type":"object","properties":{}},"RefreshTokenDto":{"type":"object","properties":{"refreshToken":{"type":"string","description":"Refresh token","example":"refresh-token-xyz789"}},"required":["refreshToken"]},"ResetPasswordLinkResponseDto":{"type":"object","properties":{"message":{"type":"string","description":"Response message","example":"Token is valid. Use POST /api/auth/reset-password with this token."},"token":{"type":"string","description":"Reset token (if valid)","example":"abc123-def456-ghi789"},"valid":{"type":"boolean","description":"Whether token is valid","example":true},"instructions":{"type":"string","description":"Instructions for resetting password","example":"Send POST request to /api/auth/reset-password with {\"token\": \"abc123\", \"newPassword\": \"your-new-password\"}"}},"required":["message","valid"]},"UserNotFoundError":{"type":"object","properties":{}},"UpdateProfileDto":{"type":"object","properties":{"name":{"type":"string","description":"User full name","example":"John Smith","minLength":2,"maxLength":50},"phone":{"type":"string","description":"User phone number","example":"+9876543210","maxLength":20},"bio":{"type":"string","description":"User biography","example":"Software developer with 5 years of experience","maxLength":500},"avatar":{"type":"string","description":"Profile avatar URL","example":"https://example.com/avatar.jpg"}}},"ChangePasswordDto":{"type":"object","properties":{"currentPassword":{"type":"string","description":"Current password","example":"OldPassword123"},"newPassword":{"type":"string","description":"New password (must contain uppercase, lowercase, and number)","example":"NewPassword456","minLength":6,"maxLength":100}},"required":["currentPassword","newPassword"]},"CreateUserDto":{"type":"object","properties":{"email":{"type":"string","description":"User email address","example":"john.doe@example.com"},"password":{"type":"string","description":"User password","example":"SecurePass123!","minLength":6},"name":{"type":"string","description":"User full name","example":"John Doe"},"phone":{"type":"string","description":"User phone number","example":"+1234567890"},"role":{"type":"string","description":"User role","enum":["USER","ADMIN"],"example":"USER","default":"USER"}},"required":["email","password","name"]},"LoginResponseDto":{"type":"object","properties":{"token":{"type":"string","description":"JWT token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVjN2YxZjc3YmNmODZjZDc5OTQzOTAxMSIsImlhdCI6MTcwNTIxMDMwMH0.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},"user":{"description":"Authenticated user information","allOf":[{"$ref":"#/components/schemas/UserResponseDto"}]}},"required":["token","user"]},"UserNotActiveError":{"type":"object","properties":{}},"UserListResponseDto":{"type":"object","properties":{"users":{"description":"List of users","type":"array","items":{"$ref":"#/components/schemas/UserResponseDto"}},"total":{"type":"number","description":"Total number of users","example":25}},"required":["users","total"]},"InsufficientPermissionsError":{"type":"object","properties":{}},"SuccessResponseDto":{"type":"object","properties":{"message":{"type":"string","description":"Success message","example":"User created successfully"},"id":{"type":"string","description":"Related ID","example":"507f1f77bcf86cd799439011"}},"required":["message"]}}}}