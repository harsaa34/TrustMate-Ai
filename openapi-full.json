{"openapi":"3.0.0","paths":{"/api":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/api/auth/signup":{"post":{"description":"Register a new user account","operationId":"AuthController_signup","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}},"400":{"description":"User update failed: undefined","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateError"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"409":{"description":"User with email undefined already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAlreadyExistsError"}}}}},"summary":"Register a new user account","tags":["Authentication"]}},"/api/auth/login":{"post":{"description":"Authenticate user and return JWT tokens","operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Your account has been deactivated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountDeactivatedError"}}}}},"summary":"Authenticate user and return JWT tokens","tags":["Authentication"]}},"/api/auth/forgot-password":{"post":{"description":"Request password reset email","operationId":"AuthController_forgotPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgotPasswordDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"401":{"description":"Unauthorized - Invalid or missing token"}},"summary":"Request password reset email","tags":["Authentication"]}},"/api/auth/reset-password":{"post":{"description":"Reset password using reset token","operationId":"AuthController_resetPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"400":{"description":"Password validation failed: undefined","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordValidationError"}}}},"401":{"description":"Unauthorized - Invalid or missing token"}},"summary":"Reset password using reset token","tags":["Authentication"]},"get":{"description":"Handle reset password link from email","operationId":"AuthController_handleResetPasswordLink","parameters":[{"name":"token","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordLinkResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"}},"summary":"Handle reset password link from email","tags":["Authentication"]}},"/api/auth/verify-email":{"get":{"description":"Verify email address using verification token","operationId":"AuthController_verifyEmail","parameters":[{"name":"token","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"400":{"description":"Invalid or expired verification token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidTokenError"}}}},"401":{"description":"Unauthorized - Invalid or missing token"}},"summary":"Verify email address using verification token","tags":["Authentication"]}},"/api/auth/resend-verification":{"post":{"description":"Resend verification email","operationId":"AuthController_resendVerificationEmail","parameters":[],"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"401":{"description":"Unauthorized - Invalid or missing token"}},"summary":"Resend verification email","tags":["Authentication"]}},"/api/auth/refresh-token":{"post":{"description":"Refresh access token using refresh token","operationId":"AuthController_refreshToken","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"400":{"description":"Invalid or expired verification token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidTokenError"}}}},"401":{"description":"Unauthorized - Invalid or missing token"}},"summary":"Refresh access token using refresh token","tags":["Authentication"]}},"/api/auth/profile":{"get":{"description":"Get authenticated user profile","operationId":"AuthController_getProfile","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"JWT-auth":[]}],"summary":"Get authenticated user profile","tags":["Authentication"]},"put":{"description":"Update authenticated user profile","operationId":"AuthController_updateProfile","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"400":{"description":"User update failed: undefined","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateError"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"JWT-auth":[]}],"summary":"Update authenticated user profile","tags":["Authentication"]}},"/api/auth/change-password":{"post":{"description":"Change user password","operationId":"AuthController_changePassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"400":{"description":"Password validation failed: undefined","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordValidationError"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"JWT-auth":[]}],"summary":"Change user password","tags":["Authentication"]}},"/api/auth/logout":{"post":{"description":"Logout user and invalidate refresh token","operationId":"AuthController_logout","parameters":[],"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"JWT-auth":[]}],"summary":"Logout user and invalidate refresh token","tags":["Authentication"]}},"/api/auth/logout-all":{"post":{"description":"Logout user from all devices","operationId":"AuthController_logoutFromAllDevices","parameters":[],"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"JWT-auth":[]}],"summary":"Logout user from all devices","tags":["Authentication"]}},"/api/auth/account":{"delete":{"description":"Delete user account (soft delete)","operationId":"AuthController_deleteAccount","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"JWT-auth":[]}],"summary":"Delete user account (soft delete)","tags":["Authentication"]}},"/api/auth/check-email/{email}":{"get":{"description":"Check if email is available for registration","operationId":"AuthController_checkEmailAvailability","parameters":[{"name":"email","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"401":{"description":"Unauthorized - Invalid or missing token"}},"summary":"Check if email is available for registration","tags":["Authentication"]}},"/api/auth/validate":{"get":{"description":"Validate JWT token","operationId":"AuthController_validateToken","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Validate JWT token","tags":["Authentication"]}},"/api/users/register":{"post":{"description":"Register a new user","operationId":"UserController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"409":{"description":"User already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAlreadyExistsError"}}}}},"summary":"Register a new user","tags":["User"]}},"/api/users/login":{"post":{"description":"User login","operationId":"UserController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"User account is not active","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotActiveError"}}}}},"summary":"User login","tags":["User"]}},"/api/users/profile":{"get":{"description":"Get current user profile","operationId":"UserController_getProfile","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"JWT-auth":[]}],"summary":"Get current user profile","tags":["User"]},"put":{"description":"Update own profile","operationId":"UserController_updateProfile","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"JWT-auth":[]}],"summary":"Update own profile","tags":["User"]},"delete":{"description":"Delete own account","operationId":"UserController_deleteAccount","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"JWT-auth":[]}],"summary":"Delete own account","tags":["User"]}},"/api/users/change-password":{"post":{"description":"Change own password","operationId":"UserController_changePassword","parameters":[],"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"JWT-auth":[]}],"summary":"Change own password","tags":["User"]}},"/api/users/deactivate":{"delete":{"description":"Deactivate own account","operationId":"UserController_deactivateOwnAccount","parameters":[],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotFoundError"}}}}},"security":[{"JWT-auth":[]}],"summary":"Deactivate own account","tags":["User"]}},"/api/groups":{"post":{"description":"Create a new group","operationId":"GroupController_createGroup","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateGroupDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Create a new group","tags":["Groups"]},"get":{"description":"Get user's groups","operationId":"GroupController_getUserGroups","parameters":[{"name":"sortBy","required":false,"in":"query","description":"Field to sort by","schema":{"example":"createdAt","type":"string","enum":["name","createdAt","updatedAt"]}},{"name":"sortOrder","required":false,"in":"query","description":"Sort order","schema":{"example":"desc","type":"string","enum":["asc","desc"]}},{"name":"page","required":false,"in":"query","description":"Page number","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Items per page","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GroupResponseDto"}}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Get user's groups","tags":["Groups"]}},"/api/groups/{id}":{"get":{"description":"Get group details","operationId":"GroupController_getGroupById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Get group details","tags":["Groups"]},"put":{"description":"Update group","operationId":"GroupController_updateGroup","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateGroupDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Update group","tags":["Groups"]},"delete":{"description":"Delete group","operationId":"GroupController_deleteGroup","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"Success"},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Delete group","tags":["Groups"]}},"/api/groups/{id}/members":{"post":{"description":"Add member to group","operationId":"GroupController_addMember","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddMemberDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Add member to group","tags":["Groups"]},"get":{"description":"Get group members","operationId":"GroupController_getGroupMembers","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GroupMemberResponseDto"}}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Get group members","tags":["Groups"]}},"/api/groups/{id}/members/{memberId}":{"delete":{"description":"Remove member from group","operationId":"GroupController_removeMember","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"memberId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"Success"},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Remove member from group","tags":["Groups"]}},"/api/groups/{id}/stats":{"get":{"description":"Get group statistics","operationId":"GroupController_getGroupStatistics","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupStatisticsDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Get group statistics","tags":["Groups"]}},"/api/groups/{groupId}/expenses":{"post":{"description":"Create a new expense in a group","operationId":"ExpenseController_createExpense","parameters":[{"name":"groupId","required":true,"in":"path","description":"Group ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateExpenseDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExpenseResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Create a new expense in a group","tags":["Expenses"]},"get":{"description":"Get all expenses for a group with filters","operationId":"ExpenseController_getGroupExpenses","parameters":[{"name":"groupId","required":true,"in":"path","description":"Group ID","schema":{"type":"string"}},{"name":"category","required":false,"in":"query","description":"Filter by category","schema":{"type":"string","enum":["food","transport","accommodation","shopping","entertainment","bills","health","education","other"]}},{"name":"fromDate","required":false,"in":"query","description":"Filter from date","schema":{"format":"date-time","type":"string"}},{"name":"toDate","required":false,"in":"query","description":"Filter to date","schema":{"format":"date-time","type":"string"}},{"name":"paidByUserId","required":false,"in":"query","description":"Filter by paid by user ID","schema":{"type":"string"}},{"name":"verified","required":false,"in":"query","description":"Filter by verified status","schema":{"type":"boolean"}},{"name":"search","required":false,"in":"query","description":"Search in title and description","schema":{"type":"string"}},{"name":"sortBy","required":false,"in":"query","description":"Sort field","schema":{"type":"string","enum":["date","amount","createdAt"]}},{"name":"sortOrder","required":false,"in":"query","description":"Sort direction","schema":{"type":"string","enum":["asc","desc"]}},{"name":"page","required":false,"in":"query","description":"Page number","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Items per page","schema":{"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExpenseListResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Get all expenses for a group with filters","tags":["Expenses"]}},"/api/groups/{groupId}/expenses/summary":{"get":{"description":"Get expense summary for a group","operationId":"ExpenseController_getExpenseSummary","parameters":[{"name":"groupId","required":true,"in":"path","description":"Group ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Get expense summary for a group","tags":["Expenses"]}},"/api/groups/{groupId}/expenses/balances":{"get":{"description":"Calculate balances for all group members","operationId":"ExpenseController_getBalances","parameters":[{"name":"groupId","required":true,"in":"path","description":"Group ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BalanceResponseDto"}}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Calculate balances for all group members","tags":["Expenses"]}},"/api/groups/{groupId}/expenses/insights":{"get":{"description":"Get spending insights for a group","operationId":"ExpenseController_getSpendingInsights","parameters":[{"name":"groupId","required":true,"in":"path","description":"Group ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InsightResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Get spending insights for a group","tags":["Expenses"]}},"/api/groups/{groupId}/expenses/{expenseId}":{"get":{"description":"Get expense by ID","operationId":"ExpenseController_getExpenseById","parameters":[{"name":"groupId","required":true,"in":"path","description":"Group ID","schema":{"type":"string"}},{"name":"expenseId","required":true,"in":"path","description":"Expense ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExpenseResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Get expense by ID","tags":["Expenses"]},"put":{"description":"Update an expense","operationId":"ExpenseController_updateExpense","parameters":[{"name":"groupId","required":true,"in":"path","description":"Group ID","schema":{"type":"string"}},{"name":"expenseId","required":true,"in":"path","description":"Expense ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateExpenseDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExpenseResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Update an expense","tags":["Expenses"]},"delete":{"description":"Delete an expense","operationId":"ExpenseController_deleteExpense","parameters":[{"name":"groupId","required":true,"in":"path","description":"Group ID","schema":{"type":"string"}},{"name":"expenseId","required":true,"in":"path","description":"Expense ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Delete an expense","tags":["Expenses"]}},"/api/groups/{groupId}/expenses/{expenseId}/verify":{"post":{"description":"Verify receipt for an expense","operationId":"ExpenseController_verifyReceipt","parameters":[{"name":"groupId","required":true,"in":"path","description":"Group ID","schema":{"type":"string"}},{"name":"expenseId","required":true,"in":"path","description":"Expense ID","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyReceiptDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Verify receipt for an expense","tags":["Expenses"]}},"/api/groups/{groupId}/expenses/upload-receipt":{"post":{"description":"Upload receipt image","operationId":"ExpenseController_uploadReceipt","parameters":[],"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Upload receipt image","tags":["Expenses"]}},"/api/groups/{groupId}/settlements":{"post":{"description":"Create a new settlement","operationId":"SettlementController_createSettlement","parameters":[{"name":"groupId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSettlementDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettlementResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Create a new settlement","tags":["Settlements"]},"get":{"description":"Get all settlements for a group","operationId":"SettlementController_getGroupSettlements","parameters":[{"name":"groupId","required":true,"in":"path","schema":{"type":"string"}},{"name":"status","required":false,"in":"query","description":"Filter by status","schema":{"example":"pending","type":"string","enum":["pending","completed","cancelled"]}},{"name":"fromDate","required":false,"in":"query","description":"Filter from date","schema":{"format":"date-time","example":"2024-01-01","type":"string"}},{"name":"toDate","required":false,"in":"query","description":"Filter to date","schema":{"format":"date-time","example":"2024-12-31","type":"string"}},{"name":"userId","required":false,"in":"query","description":"Filter by user ID","schema":{"example":"507f1f77bcf86cd799439011","type":"string"}},{"name":"isAutoGenerated","required":false,"in":"query","description":"Filter by auto-generated settlements","schema":{"example":true,"type":"boolean"}},{"name":"sortBy","required":false,"in":"query","description":"Sort by field","schema":{"example":"date","type":"string","enum":["date","amount","createdAt","updatedAt"]}},{"name":"sortOrder","required":false,"in":"query","description":"Sort order","schema":{"example":"desc","type":"string","enum":["asc","desc"]}},{"name":"page","required":false,"in":"query","description":"Page number","schema":{"minimum":1,"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Items per page","schema":{"minimum":1,"maximum":100,"example":20,"type":"number"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettlementListResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Get all settlements for a group","tags":["Settlements"]}},"/api/groups/{groupId}/settlements/balances":{"get":{"description":"Calculate balances for all group members","operationId":"SettlementController_getBalances","parameters":[{"name":"groupId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BalanceResponseDto"}}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Calculate balances for all group members","tags":["Settlements"]}},"/api/groups/{groupId}/settlements/optimize":{"get":{"description":"Get optimized settlement suggestions","operationId":"SettlementController_getOptimizedSettlements","parameters":[{"name":"groupId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SettlementOptimizationResultDto"}}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Get optimized settlement suggestions","tags":["Settlements"]}},"/api/groups/{groupId}/settlements/optimize/auto-create":{"post":{"description":"Create optimized settlements automatically","operationId":"SettlementController_createOptimizedSettlements","parameters":[{"name":"groupId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOptimizedSettlementsDto"}}}},"responses":{"201":{"description":"Success","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SettlementResponseDto"}}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Create optimized settlements automatically","tags":["Settlements"]}},"/api/groups/{groupId}/settlements/statistics":{"get":{"description":"Get settlement statistics","operationId":"SettlementController_getStatistics","parameters":[{"name":"groupId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettlementStatisticsDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Get settlement statistics","tags":["Settlements"]}},"/api/groups/{groupId}/settlements/{settlementId}":{"get":{"description":"Get settlement by ID","operationId":"SettlementController_getSettlementById","parameters":[{"name":"groupId","required":true,"in":"path","schema":{"type":"string"}},{"name":"settlementId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettlementResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Get settlement by ID","tags":["Settlements"]},"delete":{"description":"Delete a settlement","operationId":"SettlementController_deleteSettlement","parameters":[{"name":"groupId","required":true,"in":"path","schema":{"type":"string"}},{"name":"settlementId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"Success"},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Delete a settlement","tags":["Settlements"]}},"/api/groups/{groupId}/settlements/{settlementId}/status":{"put":{"description":"Update settlement status","operationId":"SettlementController_updateSettlementStatus","parameters":[{"name":"groupId","required":true,"in":"path","schema":{"type":"string"}},{"name":"settlementId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSettlementStatusDto"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettlementResponseDto"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Insufficient permissions"}},"security":[{"JWT-auth":[]}],"summary":"Update settlement status","tags":["Settlements"]}}},"info":{"title":"TrustMate AI - Expense Tracker API","description":"Complete API for managing groups, expenses, and settlements between friends","version":"1.0","contact":{}},"tags":[{"name":"Authentication","description":"User authentication and authorization"},{"name":"Users","description":"User management operations"},{"name":"Groups","description":"Group management operations"},{"name":"Expenses","description":"Expense tracking operations"},{"name":"Settlements","description":"Settlement operations"}],"servers":[{"url":"http://localhost:3000/api","description":"Local development server"},{"url":"https://api.trustmate.ai/api","description":"Production server"}],"components":{"securitySchemes":{"JWT-auth":{"scheme":"bearer","bearerFormat":"JWT","type":"http","name":"JWT","description":"Enter JWT token","in":"header"}},"schemas":{"SignUpDto":{"type":"object","properties":{"email":{"type":"string","description":"User email address","example":"user@example.com","maxLength":100},"password":{"type":"string","description":"User password (must contain uppercase, lowercase, and number)","example":"Password123","minLength":6,"maxLength":100},"name":{"type":"string","description":"User full name","example":"John Doe","minLength":2,"maxLength":50},"phone":{"type":"string","description":"User phone number","example":"+1234567890","maxLength":20}},"required":["email","password","name"]},"UserResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"User ID","example":"507f1f77bcf86cd799439011"},"email":{"type":"string","description":"User email address","example":"john.doe@example.com"},"name":{"type":"string","description":"User full name","example":"John Doe"},"isActive":{"type":"boolean","description":"Whether the user account is active","example":true},"isVerified":{"type":"boolean","description":"Whether the user email is verified","example":true},"phone":{"type":"string","description":"User phone number","example":"+1234567890"},"avatar":{"type":"string","description":"User avatar URL","example":"https://example.com/avatar.jpg"},"bio":{"type":"string","description":"User biography","example":"Software developer with 5 years of experience"},"createdAt":{"format":"date-time","type":"string","description":"Account creation date","example":"2024-01-15T10:30:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"Last account update date","example":"2024-01-15T10:30:00.000Z"}},"required":["id","email","name","isActive","isVerified","createdAt","updatedAt"]},"AuthResponseDto":{"type":"object","properties":{"token":{"type":"string","description":"JWT access token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"refreshToken":{"type":"string","description":"Refresh token","example":"refresh-token-xyz789"},"user":{"description":"User information","allOf":[{"$ref":"#/components/schemas/UserResponseDto"}]},"sessionId":{"type":"string","description":"Session ID","example":"session-abc123-def456"},"security":{"type":"object","description":"Security information","example":{"lastLogin":"2024-01-15T10:30:00.000Z","failedAttempts":0,"requires2FA":false}}},"required":["token","user"]},"UserUpdateError":{"type":"object","properties":{}},"UserAlreadyExistsError":{"type":"object","properties":{}},"LoginDto":{"type":"object","properties":{"email":{"type":"string","description":"User email address","example":"user@example.com"},"password":{"type":"string","description":"User password","example":"Password123"}},"required":["email","password"]},"AccountDeactivatedError":{"type":"object","properties":{}},"ForgotPasswordDto":{"type":"object","properties":{"email":{"type":"string","description":"Email address for password reset","example":"user@example.com"}},"required":["email"]},"ResetPasswordDto":{"type":"object","properties":{"token":{"type":"string","description":"Reset token received via email","example":"abc123-def456-ghi789"},"newPassword":{"type":"string","description":"New password (must contain uppercase, lowercase, and number)","example":"NewPassword456","minLength":6,"maxLength":100}},"required":["token","newPassword"]},"PasswordValidationError":{"type":"object","properties":{}},"InvalidTokenError":{"type":"object","properties":{}},"RefreshTokenDto":{"type":"object","properties":{"refreshToken":{"type":"string","description":"Refresh token","example":"refresh-token-xyz789"}},"required":["refreshToken"]},"ResetPasswordLinkResponseDto":{"type":"object","properties":{"message":{"type":"string","description":"Response message","example":"Token is valid. Use POST /api/auth/reset-password with this token."},"token":{"type":"string","description":"Reset token (if valid)","example":"abc123-def456-ghi789"},"valid":{"type":"boolean","description":"Whether token is valid","example":true},"instructions":{"type":"string","description":"Instructions for resetting password","example":"Send POST request to /api/auth/reset-password with {\"token\": \"abc123\", \"newPassword\": \"your-new-password\"}"}},"required":["message","valid"]},"UserNotFoundError":{"type":"object","properties":{}},"UpdateProfileDto":{"type":"object","properties":{"name":{"type":"string","description":"User full name","example":"John Smith","minLength":2,"maxLength":50},"phone":{"type":"string","description":"User phone number","example":"+9876543210","maxLength":20},"bio":{"type":"string","description":"User biography","example":"Software developer with 5 years of experience","maxLength":500},"avatar":{"type":"string","description":"Profile avatar URL","example":"https://example.com/avatar.jpg"}}},"ChangePasswordDto":{"type":"object","properties":{"currentPassword":{"type":"string","description":"Current password","example":"OldPassword123"},"newPassword":{"type":"string","description":"New password (must contain uppercase, lowercase, and number)","example":"NewPassword456","minLength":6,"maxLength":100}},"required":["currentPassword","newPassword"]},"CreateUserDto":{"type":"object","properties":{"email":{"type":"string","description":"User email address","example":"john.doe@example.com"},"password":{"type":"string","description":"User password","example":"SecurePass123!","minLength":6},"name":{"type":"string","description":"User full name","example":"John Doe"},"phone":{"type":"string","description":"User phone number","example":"+1234567890"}},"required":["email","password","name"]},"LoginResponseDto":{"type":"object","properties":{"token":{"type":"string","description":"JWT token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVjN2YxZjc3YmNmODZjZDc5OTQzOTAxMSIsImlhdCI6MTcwNTIxMDMwMH0.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},"user":{"description":"Authenticated user information","allOf":[{"$ref":"#/components/schemas/UserResponseDto"}]},"refreshToken":{"type":"string","description":"Refresh token","example":"refresh-token-xyz123"}},"required":["token","user"]},"UserNotActiveError":{"type":"object","properties":{}},"SuccessResponseDto":{"type":"object","properties":{"message":{"type":"string","description":"Success message","example":"Operation completed successfully"}},"required":["message"]},"CreateGroupDto":{"type":"object","properties":{"name":{"type":"string","example":"Trip to Goa","description":"Group name","minLength":3,"maxLength":100},"description":{"type":"string","example":"Our vacation group for Goa trip 2024","description":"Group description","maxLength":500},"currency":{"type":"string","example":"INR","description":"Default currency for the group","enum":["INR","USD","EUR","GBP"],"default":"INR"}},"required":["name"]},"GroupResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"507f1f77bcf86cd799439011","description":"Group ID"},"name":{"type":"string","example":"Trip to Goa","description":"Group name"},"description":{"type":"string","example":"Our vacation group","description":"Group description"},"createdBy":{"type":"object","description":"Group creator","example":{"id":"507f1f77bcf86cd799439011","name":"John Doe","email":"john@example.com"}},"members":{"type":"array","description":"Group members","items":{"type":"object","properties":{"userId":{"type":"string","example":"507f1f77bcf86cd799439011"},"userName":{"type":"string","example":"Jane Smith"},"userEmail":{"type":"string","example":"jane@example.com"},"role":{"type":"string","example":"member","enum":["admin","member"]},"joinedAt":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00.000Z"}}}},"settings":{"type":"object","example":{"currency":"INR","defaultSplitType":"equal"},"description":"Group settings"},"isActive":{"type":"boolean","example":true,"description":"Whether the group is active"},"createdAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"Creation date"},"updatedAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"Last update date"}},"required":["id","name","createdBy","members","settings","isActive","createdAt","updatedAt"]},"UpdateGroupDto":{"type":"object","properties":{"name":{"type":"string","example":"Goa Trip 2024","description":"Group name","minLength":3,"maxLength":100},"description":{"type":"string","example":"Updated description for our Goa trip","description":"Group description","maxLength":500},"currency":{"type":"string","example":"USD","description":"Default currency for the group","enum":["INR","USD","EUR","GBP"]}}},"AddMemberDto":{"type":"object","properties":{"userId":{"type":"string","example":"507f1f77bcf86cd799439011","description":"User ID to add to the group"},"role":{"type":"string","example":"member","description":"Role for the new member","enum":["admin","member"],"default":"member"}},"required":["userId"]},"GroupMemberResponseDto":{"type":"object","properties":{"userId":{"type":"string","example":"507f1f77bcf86cd799439011","description":"User ID"},"userName":{"type":"string","example":"John Doe","description":"User name"},"userEmail":{"type":"string","example":"john@example.com","description":"User email"},"role":{"type":"string","example":"member","description":"Member role","enum":["admin","member"]},"joinedAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"Join date"}},"required":["userId","userName","userEmail","role","joinedAt"]},"GroupStatisticsDto":{"type":"object","properties":{"groupId":{"type":"string","example":"507f1f77bcf86cd799439011","description":"Group ID"},"name":{"type":"string","example":"Trip to Goa","description":"Group name"},"memberCount":{"type":"number","example":5,"description":"Number of members"},"createdAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"Creation date"}},"required":["groupId","name","memberCount","createdAt"]},"ExpenseSplitDto":{"type":"object","properties":{"userId":{"type":"string","description":"User ID for this split"},"amount":{"type":"number","description":"Amount for this user (required for exact splits)"},"percentage":{"type":"number","description":"Percentage for this user (required for percentage splits)"},"shares":{"type":"number","description":"Shares for this user (required for share splits)"},"note":{"type":"string","description":"Note for this split"}},"required":["userId"]},"CreateExpenseDto":{"type":"object","properties":{"title":{"type":"string","description":"Expense title"},"description":{"type":"string","description":"Expense description"},"amount":{"type":"number","description":"Total expense amount"},"paidByUserId":{"type":"string","description":"User who paid for the expense"},"date":{"format":"date-time","type":"string","description":"Expense date"},"category":{"type":"string","description":"Expense category","enum":["food","transport","accommodation","shopping","entertainment","bills","health","education","other"]},"splitType":{"type":"string","description":"Split type","enum":["equal","percentage","exact","shares","adjustment"]},"splits":{"description":"Expense splits for each user (minimum 2 users)","type":"array","items":{"$ref":"#/components/schemas/ExpenseSplitDto"}},"receiptImageUrl":{"type":"string","description":"Receipt image URL"},"location":{"type":"string","description":"Expense location"},"tags":{"description":"Tags for categorization","type":"array","items":{"type":"string"}}},"required":["title","amount","paidByUserId","date","splitType","splits"]},"ExpenseSplitResponseDto":{"type":"object","properties":{"userId":{"type":"string","description":"User ID for this split"},"amount":{"type":"number","description":"Amount for this user"},"percentage":{"type":"number","description":"Percentage for this user"},"shares":{"type":"number","description":"Shares for this user"},"note":{"type":"string","description":"Note for this split"}},"required":["userId","amount"]},"ExpenseResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Expense ID"},"groupId":{"type":"string","description":"Group ID"},"title":{"type":"string","description":"Expense title"},"description":{"type":"string","description":"Expense description"},"amount":{"type":"number","description":"Total expense amount"},"paidByUserId":{"type":"string","description":"User who paid for the expense"},"paidByUserName":{"type":"string","description":"Paid by user name"},"date":{"format":"date-time","type":"string","description":"Expense date"},"category":{"type":"string","description":"Expense category"},"splitType":{"type":"string","description":"Split type"},"splits":{"description":"Expense splits","type":"array","items":{"$ref":"#/components/schemas/ExpenseSplitResponseDto"}},"receiptImageUrl":{"type":"string","description":"Receipt image URL"},"location":{"type":"string","description":"Expense location"},"tags":{"description":"Tags for categorization","type":"array","items":{"type":"string"}},"verified":{"type":"boolean","description":"Whether expense is verified"},"createdByUserId":{"type":"string","description":"Created by user ID"},"createdByUserName":{"type":"string","description":"Created by user name"},"createdAt":{"format":"date-time","type":"string","description":"Creation timestamp"},"updatedAt":{"format":"date-time","type":"string","description":"Update timestamp"}},"required":["id","groupId","title","amount","paidByUserId","date","splitType","splits","verified","createdByUserId","createdAt","updatedAt"]},"ExpenseListResponseDto":{"type":"object","properties":{"expenses":{"description":"List of expenses","type":"array","items":{"$ref":"#/components/schemas/ExpenseResponseDto"}},"total":{"type":"number","description":"Total count"},"page":{"type":"number","description":"Page number"},"limit":{"type":"number","description":"Items per page"},"totalPages":{"type":"number","description":"Total pages"}},"required":["expenses","total","page","limit","totalPages"]},"BalanceResponseDto":{"type":"object","properties":{"userId":{"type":"string","example":"507f1f77bcf86cd799439011","description":"User ID"},"userName":{"type":"string","example":"John Doe","description":"User name"},"amount":{"type":"number","example":-1500.5,"description":"Net balance (negative = owes, positive = is owed)"},"paidAmount":{"type":"number","example":5000,"description":"Total amount paid by user"},"owedAmount":{"type":"number","example":3500,"description":"Total amount owed by user"},"currency":{"type":"string","example":"INR","description":"Currency"}},"required":["userId","userName","amount","paidAmount","owedAmount","currency"]},"InsightResponseDto":{"type":"object","properties":{"totalSpent":{"type":"number","description":"Total spent in period"},"averagePerExpense":{"type":"number","description":"Average per expense"},"expenseCount":{"type":"number","description":"Number of expenses"},"categories":{"type":"object","description":"Top categories with amounts"},"dailyBreakdown":{"type":"object","description":"Daily spending breakdown"}},"required":["totalSpent","averagePerExpense","expenseCount","categories","dailyBreakdown"]},"UpdateExpenseDto":{"type":"object","properties":{"title":{"type":"string","description":"Expense title"},"description":{"type":"string","description":"Expense description"},"amount":{"type":"number","description":"Total expense amount"},"paidByUserId":{"type":"string","description":"User who paid for the expense"},"date":{"format":"date-time","type":"string","description":"Expense date"},"category":{"type":"string","description":"Expense category","enum":["food","transport","accommodation","shopping","entertainment","bills","health","education","other"]},"splitType":{"type":"string","description":"Split type","enum":["equal","percentage","exact","shares","adjustment"]},"splits":{"description":"Updated expense splits (minimum 2 users)","type":"array","items":{"$ref":"#/components/schemas/ExpenseSplitDto"}},"receiptImageUrl":{"type":"string","description":"Receipt image URL"},"verified":{"type":"boolean","description":"Mark expense as verified"},"location":{"type":"string","description":"Expense location"},"tags":{"description":"Tags for categorization","type":"array","items":{"type":"string"}}}},"VerifyReceiptDto":{"type":"object","properties":{"extractedAmount":{"type":"number","description":"Actual amount from receipt"},"extractedDate":{"format":"date-time","type":"string","description":"Extracted date from receipt"},"confidenceScore":{"type":"number","description":"Confidence score of OCR extraction"},"metadata":{"type":"object","description":"Additional verification metadata"}},"required":["extractedAmount"]},"CreateSettlementDto":{"type":"object","properties":{"fromUserId":{"type":"string","example":"507f1f77bcf86cd799439011","description":"User who owes money (payer)"},"toUserId":{"type":"string","example":"507f1f77bcf86cd799439012","description":"User who is owed money (receiver)"},"amount":{"type":"number","example":1500.5,"description":"Settlement amount","minimum":0.01},"date":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"Settlement date"},"description":{"type":"string","example":"Dinner expense settlement","description":"Settlement description","maxLength":500},"paymentMethod":{"type":"string","example":"UPI","description":"Payment method used","enum":["UPI","CASH","BANK_TRANSFER","CREDIT_CARD","DEBIT_CARD","PAYTM","PHONEPE","GOOGLE_PAY"]},"transactionId":{"type":"string","example":"TXN123456789","description":"Transaction ID for reference"},"isAutoGenerated":{"type":"boolean","example":false,"description":"Whether settlement was auto-generated"}},"required":["fromUserId","toUserId","amount","date"]},"SettlementResponseDto":{"type":"object","properties":{"id":{"type":"string","example":"507f1f77bcf86cd799439011","description":"Settlement ID"},"groupId":{"type":"string","example":"507f1f77bcf86cd799439021","description":"Group ID"},"fromUserId":{"type":"string","example":"507f1f77bcf86cd799439011","description":"User who owes money (payer)"},"fromUserName":{"type":"string","example":"John Doe","description":"Payer user name"},"toUserId":{"type":"string","example":"507f1f77bcf86cd799439012","description":"User who is owed money (receiver)"},"toUserName":{"type":"string","example":"Jane Smith","description":"Receiver user name"},"amount":{"type":"number","example":1500.5,"description":"Settlement amount"},"date":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"Settlement date"},"status":{"type":"string","example":"pending","description":"Settlement status","enum":["pending","completed","cancelled"]},"description":{"type":"string","example":"Dinner expense settlement","description":"Settlement description"},"paymentMethod":{"type":"string","example":"UPI","description":"Payment method used"},"transactionId":{"type":"string","example":"TXN123456789","description":"Transaction ID"},"isAutoGenerated":{"type":"boolean","example":false,"description":"Whether settlement was auto-generated"},"createdAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"Creation date"},"updatedAt":{"format":"date-time","type":"string","example":"2024-01-15T10:30:00.000Z","description":"Last update date"}},"required":["id","groupId","fromUserId","fromUserName","toUserId","toUserName","amount","date","status","isAutoGenerated","createdAt","updatedAt"]},"SettlementListResponseDto":{"type":"object","properties":{"settlements":{"description":"List of settlements","type":"array","items":{"$ref":"#/components/schemas/SettlementResponseDto"}},"total":{"type":"number","example":25,"description":"Total number of settlements"},"page":{"type":"number","example":1,"description":"Current page number"},"limit":{"type":"number","example":20,"description":"Items per page"},"totalPages":{"type":"number","example":2,"description":"Total number of pages"}},"required":["settlements","total","page","limit","totalPages"]},"SettlementOptimizationResultDto":{"type":"object","properties":{"fromUserId":{"type":"string","example":"507f1f77bcf86cd799439011","description":"Payer user ID"},"fromUserName":{"type":"string","example":"John Doe","description":"Payer user name"},"toUserId":{"type":"string","example":"507f1f77bcf86cd799439012","description":"Receiver user ID"},"toUserName":{"type":"string","example":"Jane Smith","description":"Receiver user name"},"amount":{"type":"number","example":1500.5,"description":"Settlement amount"}},"required":["fromUserId","fromUserName","toUserId","toUserName","amount"]},"CreateOptimizedSettlementsDto":{"type":"object","properties":{"autoCreate":{"type":"boolean","example":true,"description":"Automatically create optimized settlements"},"maxSettlements":{"type":"number","example":5,"description":"Maximum number of settlements to create","minimum":1}},"required":["autoCreate"]},"SettlementStatisticsDto":{"type":"object","properties":{"totalSettlements":{"type":"number","example":25,"description":"Total number of settlements"},"totalAmount":{"type":"number","example":50000.75,"description":"Total amount settled"},"totalDebt":{"type":"number","example":10000.25,"description":"Total outstanding debt"},"pendingCount":{"type":"number","example":5,"description":"Number of pending settlements"},"completedCount":{"type":"number","example":18,"description":"Number of completed settlements"},"cancelledCount":{"type":"number","example":2,"description":"Number of cancelled settlements"},"recentSettlements":{"description":"Recent settlements","type":"array","items":{"$ref":"#/components/schemas/SettlementResponseDto"}},"balances":{"description":"Current balances","type":"array","items":{"$ref":"#/components/schemas/BalanceResponseDto"}}},"required":["totalSettlements","totalAmount","totalDebt","pendingCount","completedCount","cancelledCount","recentSettlements","balances"]},"UpdateSettlementStatusDto":{"type":"object","properties":{"status":{"type":"string","example":"completed","description":"New settlement status","enum":["pending","completed","cancelled"]}},"required":["status"]}}}}